webpackJsonp([0],{"+Ok3":function(t,e){},"/WQn":function(t,e){},"0yAc":function(t,e){},"2jjZ":function(t,e,s){"use strict";(function(t){e.a={name:"UserPowers",data:function(){return{userinfo:{user_name:""},powers:[{checked:!1,id:0,name:""}]}},mounted:function(){this.getUserInfo()},methods:{getParams:function(){var t=window.location.hash.split("?",-1);console.log(t);var e={};if(t.length>1){var s=t[1].split("&"),a=0,o=s.length;for(a=0;a<o;a++){var i=s[a].split("=");i.length>1&&(e[i[0]]=i[1])}}return void 0===e.id&&(e.id=0),e},save:function(){var e=[];t(".power-row").each(function(){if(t(this).prop("checked")){var s=t(this).attr("data-id");s=parseInt(s),e.push(s)}}),console.log(e);var s=this.getParams();axios.post("/user/powers/"+s.id,{powers:e}).then(function(t){console.log(t),2e3!=t.data.code?alert(t.data.message):8e3==t.data.code?window.location.href="/ui/login.html":alert("保存成功")}).catch(function(t){})},checkAll:function(e){t(".power-row").prop("checked",t(e.target).prop("checked"))},getUserInfo:function(){var t=this,e=t.getParams();axios.get("/user/info/"+e.id).then(function(e){console.log(e),2e3==e.data.code?t.userinfo=e.data.data:8e3==e.data.code&&(window.location.href="/ui/login.html"),t.getPowers()}).catch(function(t){})},getPowers:function(){var e=this,s=e.getParams();axios.get("/powers/"+s.id+"?time="+(new Date).valueOf()).then(function(s){2e3==s.data.code?(e.powers=s.data.data,window.setTimeout(function(){var e=0;t(".power-row").each(function(){t(this).prop("checked")&&e++}),e==t(".power-row").length&&t(".selected-all").prop("checked",!0)},300)):8e3==s.data.code?window.location.href="/ui/login.html":alert(s.data.message)}).catch(function(t){})}}}}).call(e,s("L7Pj"))},"2poj":function(t,e){},D9gF:function(t,e,s){"use strict";(function(t){e.a={name:"CronList",data:function(){return{cron_list:[],is_stop:0,is_mutex:0,is_timeout:0,keyword:""}},mounted:function(){this.list()},methods:{shRow:function(e){var s=t(e.target);s.is("input")&&(s=s.parent()),console.log(s.index()),t(e.target).prop("checked")?t("#cron-list-table tr").each(function(){t(this).find(".sh-row").eq(s.index()).show()}):t("#cron-list-table tr").each(function(){t(this).find(".sh-row").eq(s.index()).hide()})},list:function(){var t=this,e="/cron/list?";0==t.is_stop?e+="stop=&":1==t.is_stop?e+="stop=1&":2==t.is_stop&&(e+="stop=0&"),0==t.is_mutex?e+="mutex=&":1==t.is_mutex?e+="mutex=1&":2==t.is_mutex&&(e+="mutex=0&"),0==t.is_timeout?e+="timeout=&":1==t.is_timeout?e+="timeout=1&":2==t.is_timeout&&(e+="timeout=0&"),e+="keyword="+encodeURIComponent(t.keyword)+"&time="+(new Date).valueOf(),console.log(e),axios.get(e).then(function(e){if(2e3==e.data.code){console.log(e.data.data);var s=0;(new Date).valueOf();for(s=0;s<e.data.data.length;s++);t.cron_list=e.data.data}else 8e3==e.data.code?window.location.href="/ui/login.html":console.log(e.data.message)}).catch(function(t){})},stop:function(e){var s=t(e.target).attr("item-id"),a=this;axios.get("/cron/stop/"+s+"?time="+(new Date).valueOf()).then(function(t){if(2e3==t.data.code){console.log(t);var e=a.cron_list.length,o=0;for(o=0;o<e;o++)a.cron_list[o].id==s&&(a.cron_list[o].stop=!0,console.log(a.cron_list[o]))}else 8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){})},start:function(e){var s=t(e.target).attr("item-id"),a=this;axios.get("/cron/start/"+s+"?time="+(new Date).valueOf()).then(function(t){if(2e3==t.data.code){console.log(t);var e=a.cron_list.length,o=0;for(o=0;o<e;o++)a.cron_list[o].id==s&&(a.cron_list[o].stop=!1,console.log(a.cron_list[o]))}else 8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){})},del:function(e){var s=t(e.target).attr("item-id");if(window.confirm("确认删除"+s+"？")){var a=this;axios.get("/cron/delete/"+s+"?time="+(new Date).valueOf()).then(function(t){if(2e3==t.data.code){console.log(t);var e=a.cron_list.length,o=0;for(o=0;o<e;o++)a.cron_list[o].id==s&&(console.log(a.cron_list[o]),a.cron_list.splice(o,1))}else 8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){})}},jumpEdit:function(e){var s=t(e.target).attr("item-id");window.location.href="/ui/#/edit?id="+s},jumpLogs:function(){var e=t(event.target).attr("item-id");window.location.href="/ui/#/logs?id="+e},mutex0:function(e){var s=t(e.target).attr("item-id"),a=this;axios.get("/cron/mutex/false/"+s+"?time="+(new Date).valueOf()).then(function(t){if(2e3==t.data.code){console.log(t);var e=a.cron_list.length,o=0;for(o=0;o<e;o++)a.cron_list[o].id==s&&(a.cron_list[o].is_mutex=!1,console.log(a.cron_list[o]))}else 8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){})},mutex1:function(e){var s=t(e.target).attr("item-id"),a=this;axios.get("/cron/mutex/true/"+s+"?time="+(new Date).valueOf()).then(function(t){if(2e3==t.data.code){console.log(t);var e=a.cron_list.length,o=0;for(o=0;o<e;o++)a.cron_list[o].id==s&&(a.cron_list[o].is_mutex=!0,console.log(a.cron_list[o]))}else 8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){})},analysis:function(){},run:function(e){var s=t(e.target).attr("item-id"),a=t(e.target).attr("item-command");dialog({title:"确认执行？",content:'<div style="color: #f00;">注意：即将执行指令['+a+']，最终产生的风险(系统风险、业务风险)请自行评估！</div><div>默认超时时间：<input id="property-returnValue-demo" value="3" />秒</div><div class="run-command-response">执行返回值：</div><div class="run-command-response"><textarea style="width: 100%;" id="run-command-response-show"></textarea></div>',ok:function(){var e=this;e.title("执行中…");var a=t("#property-returnValue-demo").val();return axios.get("/cron/run/"+s+"/"+a+"?time="+(new Date).valueOf()).then(function(s){2e3==s.data.code?(console.log(s),t("#run-command-response-show").val(s.data.data)):8e3==s.data.code?window.location.href="/ui/login.html":t("#run-command-response-show").val(s.data.message),e.title("执行完成")}).catch(function(e){t("#run-command-response-show").val("网络异常")}),!1},okValue:"执行",cancelValue:"取消",cancel:function(){}}).show()},quick_search:function(t){var e=this;window.setTimeout(function(){console.log("stop=",e.is_stop),console.log("is_mutex=",e.is_mutex),console.log("is_timeout=",e.is_timeout),console.log("keyword=",e.keyword),e.list()},500),t.stopPropagation()},search_keyword:function(){var t=this;window.setTimeout(function(){t.list()},500)}},created:function(){}}}).call(e,s("L7Pj"))},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("IvJb"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"outter-wp"},[e("router-view")],1)},staticRenderFns:[]},i=s("C7Lr")({name:"App"},o,!1,null,null,null).exports,n=s("zO6J"),r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hello"},[s("h1",[t._v(t._s(t.msg))]),t._v(" "),s("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),s("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),s("br"),t._v(" "),s("li",[s("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};s("C7Lr")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},r,!1,function(t){s("tGEK")},"data-v-d8ec41bc",null).exports;var l=s("aj38"),c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"custom-widgets",attrs:{author:"yuyi"}},[s("div",{staticClass:"row-one"},[s("div",{staticClass:"col-md-3 widget",staticStyle:{width:"17%"}},[t._m(0),t._v(" "),s("div",{staticClass:"stats-right",staticStyle:{width:"49%"}},[s("label",[t._v(t._s(t.cron_count))])]),t._v(" "),s("div",{staticClass:"clearfix"})]),t._v(" "),s("div",{staticClass:"col-md-3 widget states-mdl",staticStyle:{width:"30%"}},[t._m(1),t._v(" "),s("div",{staticClass:"stats-right"},[s("label",{domProps:{innerHTML:t._s(t.history_run_count)}},[t._v(t._s(t.history_run_count))])]),t._v(" "),s("div",{staticClass:"clearfix"})]),t._v(" "),s("div",{staticClass:"col-md-3 widget states-thrd",staticStyle:{width:"30%"}},[t._m(2),t._v(" "),s("div",{staticClass:"stats-right"},[s("label",{domProps:{innerHTML:t._s(t.day_run_count)}},[t._v(t._s(t.day_run_count))])]),t._v(" "),s("div",{staticClass:"clearfix"})]),t._v(" "),s("div",{staticClass:"col-md-3 widget states-last",staticStyle:{width:"17%"}},[t._m(3),t._v(" "),s("div",{staticClass:"stats-right",staticStyle:{width:"49%"}},[s("label",{domProps:{innerHTML:t._s(t.day_run_fail_count)}},[t._v(t._s(t.day_run_fail_count))])]),t._v(" "),s("div",{staticClass:"clearfix"})]),t._v(" "),s("div",{staticClass:"clearfix"})])]),t._v(" "),s("div",{staticClass:"charts"},[s("div",{staticClass:"chrt-inner"},[s("div",{staticClass:"chrt-bars"},[s("div",{staticClass:"candile-inner"},[s("h3",{staticClass:"sub-tittle sub-tittle-e"},[t._v("执行次数 ")]),t._v(" "),s("span",{staticClass:"time-tool"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.days,expression:"days"}],attrs:{name:"time-pass",value:"7",type:"radio",checked:""},domProps:{checked:t._q(t.days,"7")},on:{change:function(e){t.days="7"}}}),t._v("过去一周")]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.days,expression:"days"}],attrs:{name:"time-pass",value:"30",type:"radio"},domProps:{checked:t._q(t.days,"30")},on:{change:function(e){t.days="30"}}}),t._v("过去一个月")]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.days,expression:"days"}],attrs:{name:"time-pass",value:"90",type:"radio"},domProps:{checked:t._q(t.days,"90")},on:{change:function(e){t.days="90"}}}),t._v("过去三个月")]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.days,expression:"days"}],attrs:{name:"time-pass",value:"180",type:"radio"},domProps:{checked:t._q(t.days,"180")},on:{change:function(e){t.days="180"}}}),t._v("过去六个月")]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.days,expression:"days"}],attrs:{name:"time-pass",value:"365",type:"radio"},domProps:{checked:t._q(t.days,"365")},on:{change:function(e){t.days="365"}}}),t._v("过去一年")])]),t._v(" "),s("div",{attrs:{id:"chartdiv"}}),t._v(" "),s("div",{staticStyle:{height:"142px","overflow-x":"hidden","overflow-y":"scroll",border:"#ddd solid 2px",position:"relative"}},[s("ul",{attrs:{id:"cron-list"}},[s("li",{staticStyle:{"list-style":"none","padding-bottom":"8px"}},[s("label",[s("input",{staticClass:"cron-tool",attrs:{type:"checkbox",checked:""},on:{click:t.checkedAll}}),t._v("全选")])]),t._v(" "),t._l(t.cron_list,function(e){return s("li",{staticStyle:{"list-style":"none","padding-bottom":"8px"}},[s("label",[s("input",{staticClass:"cron-item",attrs:{type:"checkbox",checked:"","data-id":e.id}}),t._v("["+t._s(e.id)+"]  "+t._s(e.command))])])}),t._v(" "),s("li",{staticStyle:{"list-style":"none","padding-bottom":"8px"}},[s("label",[s("input",{staticClass:"cron-tool",attrs:{type:"checkbox",checked:""},on:{click:t.checkedAll}}),t._v("全选")])])],2)]),t._v(" "),s("div",{staticStyle:{width:"100%",height:"368px"},attrs:{id:"avg_chart"}})]),t._v(" "),s("div",{staticClass:"clearfix"})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"stats-left",staticStyle:{width:"51%"}},[e("h5",[this._v("定时任务")]),this._v(" "),e("h4",[this._v(" 总数")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"stats-left"},[e("h5",[this._v("历史执行")]),this._v(" "),e("h4",[this._v("次数")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"stats-left"},[e("h5",[this._v("今日执行")]),this._v(" "),e("h4",[this._v("次数")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"stats-left",staticStyle:{width:"51%"}},[e("h5",[this._v("今日错误")]),this._v(" "),e("h4",[this._v("次数")])])}]};var d=function(t){s("2poj")},u=s("C7Lr")(l.a,c,!1,d,null,null).exports,v={name:"Add",data:function(){return{datetime:(new Date).Format("yyyy-MM-dd hh:mm:ss"),users:{data:[]}}},created:function(){var t=document.createElement("script");t.src="./static/js/add.vue.js?t="+(new Date).valueOf(),document.body.appendChild(t),this.getUsers()},methods:{getUsers:function(){var t=this;axios.get("/users?time="+(new Date).valueOf()).then(function(e){2e3==e.data.code?(t.users.data=e.data.data,console.log(e)):8e3==e.data.code?window.location.href="/ui/login.html":alert(e.data.message)}).catch(function(t){})}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"forms-main"},[s("h2",{staticClass:"inner-tittle"},[t._v("增加定时任务 ")]),t._v(" "),s("div",{staticClass:"graph-form"},[s("div",{staticClass:"form-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"cron-blame"}},[t._v("责任人")]),t._v(" "),s("select",{staticClass:"form-control",staticStyle:{padding:"0"},attrs:{id:"cron-blame"}},t._l(t.users.data,function(e){return s("option",{domProps:{value:e.id}},[t._v("\n            "+t._s(e.user_name)+"<"+t._s(e.real_name)+">\n          ")])}))]),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"start-time"}},[t._v("开始时间，大于等于此时间才执行，不限留空")]),t._v(" "),s("input",{staticClass:"form-control",attrs:{type:"text",id:"start-time"},domProps:{value:t.datetime}})]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button",id:"do-submit"}},[t._v("提交")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-heard-part"},[e("ol",{staticClass:"breadcrumb m-b-0"},[e("li",[e("a",{attrs:{href:"/ui/#/"}},[this._v("首页")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("增加定时任务")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"cron-set"}},[this._v("定时配置，如：*/1 * * * * *，这里精确到秒，前面的意思是每秒执行一次，分别对应，秒分时日月周")]),this._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text",id:"cron-set"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"end-time"}},[this._v("结束时间，小于此时间才执行，不限留空")]),this._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text",id:"end-time",value:"2099-01-01 08:00:00"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"command"}},[this._v("执行命令")]),this._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text",id:"command",value:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"checkbox"},[e("label",[e("input",{attrs:{type:"checkbox",id:"cron-stop"}}),this._v(" 初始化为停止状态\n          ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"checkbox"},[e("label",[e("input",{attrs:{type:"checkbox",id:"cron-is-mutex"}}),this._v(" 严格互斥执行\n          ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"remark"}},[this._v("备注")]),this._v(" "),e("textarea",{staticClass:"form-control",attrs:{id:"remark"}})])}]},m=s("C7Lr")(v,_,!1,null,null,null).exports,h=s("D9gF"),p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"graph-visual tables-main"},[s("h3",{staticClass:"inner-tittle two"},[t._v("定时任务列表（"+t._s(t.cron_list.length)+"个） ")]),t._v(" "),s("div",{staticClass:"search-tool"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),s("input",{attrs:{type:"button",value:"查询"},on:{click:t.search_keyword}})]),t._v(" "),s("div",{on:{click:t.quick_search}},[s("div",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.is_stop,expression:"is_stop"}],attrs:{name:"is-stop",value:"2",type:"radio"},domProps:{checked:t._q(t.is_stop,"2")},on:{change:function(e){t.is_stop="2"}}}),t._v("正在运行")]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.is_stop,expression:"is_stop"}],attrs:{name:"is-stop",value:"1",type:"radio"},domProps:{checked:t._q(t.is_stop,"1")},on:{change:function(e){t.is_stop="1"}}}),t._v("已停止")]),t._v(" "),s("label",{staticStyle:{cursor:"pointer"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.is_stop,expression:"is_stop"}],staticStyle:{display:"none",cursor:"pointer"},attrs:{name:"is-stop",value:"0",type:"radio"},domProps:{checked:t._q(t.is_stop,"0")},on:{change:function(e){t.is_stop="0"}}}),t._v("取消选中")])]),t._v(" "),s("div",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.is_mutex,expression:"is_mutex"}],attrs:{name:"is-mutex",value:"1",type:"radio"},domProps:{checked:t._q(t.is_mutex,"1")},on:{change:function(e){t.is_mutex="1"}}}),t._v("互斥")]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.is_mutex,expression:"is_mutex"}],attrs:{name:"is-mutex",value:"2",type:"radio"},domProps:{checked:t._q(t.is_mutex,"2")},on:{change:function(e){t.is_mutex="2"}}}),t._v("非互斥")]),t._v(" "),s("label",{staticStyle:{cursor:"pointer"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.is_mutex,expression:"is_mutex"}],staticStyle:{display:"none",cursor:"pointer"},attrs:{name:"is-mutex",value:"0",type:"radio"},domProps:{checked:t._q(t.is_mutex,"0")},on:{change:function(e){t.is_mutex="0"}}}),t._v("取消选中")])]),t._v(" "),s("div",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.is_timeout,expression:"is_timeout"}],attrs:{name:"is-timeout",value:"1",type:"radio"},domProps:{checked:t._q(t.is_timeout,"1")},on:{change:function(e){t.is_timeout="1"}}}),t._v("已过期")]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.is_timeout,expression:"is_timeout"}],attrs:{name:"is-timeout",value:"2",type:"radio"},domProps:{checked:t._q(t.is_timeout,"2")},on:{change:function(e){t.is_timeout="2"}}}),t._v("有效期内")]),t._v(" "),s("label",{staticStyle:{cursor:"pointer"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.is_timeout,expression:"is_timeout"}],staticStyle:{display:"none",cursor:"pointer"},attrs:{name:"is-timeout",value:"0",type:"radio"},domProps:{checked:t._q(t.is_timeout,"0")},on:{change:function(e){t.is_timeout="0"}}}),t._v("取消选中")])])])]),t._v(" "),s("div",[s("div",[t._v("展示\n        "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox",checked:""}}),t._v("#Id")]),t._v(" "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox"}}),t._v("添加人")]),t._v(" "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox"}}),t._v("责任人")]),t._v(" "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox",checked:""}}),t._v("定时配置")]),t._v(" "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox"}}),t._v("互斥")]),t._v(" "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox"}}),t._v("有效期")]),t._v(" "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox",checked:""}}),t._v("执行指令")]),t._v(" "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox"}}),t._v("正在运行")]),t._v(" "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox"}}),t._v("进程数")]),t._v(" "),s("label",{staticClass:"sh-tool",on:{click:t.shRow}},[s("input",{attrs:{type:"checkbox"}}),t._v("备注")])]),t._v(" "),s("div",{staticClass:"tables"},[s("table",{staticClass:"table table-bordered",attrs:{id:"cron-list-table",width:"100%"}},[t._m(1),t._v(" "),s("tbody",t._l(t.cron_list,function(e){return s("tr",[s("th",{staticClass:"sh-row"},[t._v(t._s(e.id))]),t._v(" "),s("td",{staticClass:"sh-row",staticStyle:{display:"none"}},[s("span",{attrs:{title:e.real_name}},[t._v(t._s(e.user_name))])]),t._v(" "),s("td",{staticClass:"sh-row",staticStyle:{display:"none"}},[s("span",{attrs:{title:e.blame_real_name}},[t._v(t._s(e.blame_user_name))])]),t._v(" "),s("td",{staticClass:"sh-row"},[t._v(t._s(e.cron_set))]),t._v(" "),s("td",{staticClass:"sh-row",staticStyle:{display:"none"}},[e.is_mutex?s("span",[t._v("是")]):s("span",[t._v("否")])]),t._v(" "),s("td",{staticClass:"sh-row",staticStyle:{display:"none"}},[t._v("\n              "+t._s(e.start_time)+" - "+t._s(e.end_time)+"\n            ")]),t._v(" "),s("td",{staticClass:"sh-row"},[t._v(t._s(e.command))]),t._v(" "),s("td",{staticClass:"sh-row",staticStyle:{display:"none"}},[e.stop?s("span",[s("label",{staticStyle:{color:"#f00","font-weight":"bold"}},[t._v("否")])]):s("span",[t._v("是")])]),t._v(" "),s("td",{staticClass:"sh-row",staticStyle:{display:"none"}},[t._v(t._s(e.process_num))]),t._v(" "),s("td",{staticClass:"sh-row",staticStyle:{display:"none"}},[t._v("\n              "+t._s(e.remark)+"\n            ")]),t._v(" "),s("td",[s("div",[e.stop?s("a",{staticClass:"btn",attrs:{"item-id":e.id},on:{click:t.start}},[t._v("开始")]):s("a",{staticClass:"btn",attrs:{"item-id":e.id},on:{click:t.stop}},[t._v("停止")]),t._v(" "),s("a",{staticClass:"btn",attrs:{"item-id":e.id},on:{click:t.jumpEdit}},[t._v("编辑")]),t._v(" "),s("a",{staticClass:"btn",attrs:{"item-id":e.id},on:{click:t.del}},[t._v("删除")]),t._v(" "),e.is_mutex?s("a",{staticClass:"btn",attrs:{"item-id":e.id},on:{click:t.mutex0}},[t._v("取消互斥")]):s("a",{staticClass:"btn",attrs:{"item-id":e.id},on:{click:t.mutex1}},[t._v("设为互斥")]),t._v(" "),s("a",{staticClass:"btn",attrs:{"item-id":e.id},on:{click:t.jumpLogs}},[t._v("运行日志")]),t._v(" "),s("a",{staticClass:"btn",attrs:{"item-id":e.id,"item-command":e.command},on:{click:t.run}},[t._v("运行")])])])])}))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-heard-part"},[e("ol",{staticClass:"breadcrumb m-b-0"},[e("li",[e("a",{attrs:{href:"/ui/#/"}},[this._v("首页")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("定时任务管理")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"sh-row"},[t._v("#Id")]),t._v(" "),s("th",{staticClass:"sh-row",staticStyle:{display:"none"}},[t._v("添加人")]),t._v(" "),s("th",{staticClass:"sh-row",staticStyle:{display:"none"}},[t._v("责任人")]),t._v(" "),s("th",{staticClass:"sh-row"},[t._v("定时配置")]),t._v(" "),s("th",{staticClass:"sh-row",staticStyle:{display:"none"}},[t._v("互斥")]),t._v(" "),s("th",{staticClass:"sh-row",staticStyle:{display:"none"}},[t._v("有效期")]),t._v(" "),s("th",{staticClass:"sh-row"},[t._v("执行指令")]),t._v(" "),s("th",{staticClass:"sh-row",staticStyle:{display:"none"}},[t._v("正在运行")]),t._v(" "),s("th",{staticClass:"sh-row",staticStyle:{display:"none"},attrs:{title:"0-1属于正常，大于1说明有定时任务进程堆积"}},[t._v("进程数"),s("a",{staticStyle:{color:"#f00"}},[t._v("?")])]),t._v(" "),s("th",{staticClass:"sh-row",staticStyle:{display:"none"}},[t._v("备注")]),t._v(" "),s("th",[t._v("操作")])])])}]};var f=function(t){s("+Ok3")},g=s("C7Lr")(h.a,p,!1,f,null,null).exports,A=s("vPr/"),w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"forms-main"},[s("h2",{staticClass:"inner-tittle"},[t._v("编辑定时任务 ")]),t._v(" "),s("div",{staticClass:"graph-form"},[s("div",{staticClass:"form-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"cron-blame"}},[t._v("责任人")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.blame,expression:"cron_info.blame"}],staticClass:"form-control",staticStyle:{padding:"0"},attrs:{id:"cron-blame"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.cron_info,"blame",e.target.multiple?s:s[0])}}},t._l(t.users.data,function(e){return s("option",{domProps:{value:e.id}},[t._v("\n              "+t._s(e.user_name)+"<"+t._s(e.real_name)+">\n            ")])}))]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"cron-set"}},[t._v("定时配置，如：*/1 * * * * *，这里精确到秒，前面的意思是每秒执行一次，分别对应，秒分时日月周")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.cron_set,expression:"cron_info.cron_set"}],staticClass:"form-control",attrs:{type:"text",id:"cron-set"},domProps:{value:t.cron_info.cron_set,value:t.cron_info.cron_set},on:{input:function(e){e.target.composing||t.$set(t.cron_info,"cron_set",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("开始时间，大于等于此时间才执行，不限留空")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.start_time,expression:"cron_info.start_time"}],staticClass:"form-control",attrs:{type:"text",id:"start-time"},domProps:{value:t.cron_info.start_time,value:t.cron_info.start_time},on:{input:function(e){e.target.composing||t.$set(t.cron_info,"start_time",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"end-time"}},[t._v("结束时间，小于此时间才执行，不限留空")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.end_time,expression:"cron_info.end_time"}],staticClass:"form-control",attrs:{type:"text",id:"end-time"},domProps:{value:t.cron_info.end_time,value:t.cron_info.end_time},on:{input:function(e){e.target.composing||t.$set(t.cron_info,"end_time",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"command"}},[t._v("执行命令")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.command,expression:"cron_info.command"}],staticClass:"form-control",attrs:{type:"text",id:"command"},domProps:{value:t.cron_info.command,value:t.cron_info.command},on:{input:function(e){e.target.composing||t.$set(t.cron_info,"command",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"checkbox"},[s("label",[t.cron_info.stop?s("input",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.stop,expression:"cron_info.stop"}],attrs:{type:"checkbox",id:"cron-stop",checked:""},domProps:{checked:Array.isArray(t.cron_info.stop)?t._i(t.cron_info.stop,null)>-1:t.cron_info.stop},on:{change:function(e){var s=t.cron_info.stop,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.cron_info,"stop",s.concat([null])):i>-1&&t.$set(t.cron_info,"stop",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.cron_info,"stop",o)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.stop,expression:"cron_info.stop"}],attrs:{type:"checkbox",id:"cron-stop"},domProps:{checked:Array.isArray(t.cron_info.stop)?t._i(t.cron_info.stop,null)>-1:t.cron_info.stop},on:{change:function(e){var s=t.cron_info.stop,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.cron_info,"stop",s.concat([null])):i>-1&&t.$set(t.cron_info,"stop",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.cron_info,"stop",o)}}}),t._v("\n            初始化为停止状态\n          ")])]),t._v(" "),s("div",{staticClass:"checkbox"},[s("label",[t.cron_info.is_mutex?s("input",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.is_mutex,expression:"cron_info.is_mutex"}],attrs:{type:"checkbox",id:"cron-is-mutex",checked:""},domProps:{checked:Array.isArray(t.cron_info.is_mutex)?t._i(t.cron_info.is_mutex,null)>-1:t.cron_info.is_mutex},on:{change:function(e){var s=t.cron_info.is_mutex,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.cron_info,"is_mutex",s.concat([null])):i>-1&&t.$set(t.cron_info,"is_mutex",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.cron_info,"is_mutex",o)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.is_mutex,expression:"cron_info.is_mutex"}],attrs:{type:"checkbox",id:"cron-is-mutex"},domProps:{checked:Array.isArray(t.cron_info.is_mutex)?t._i(t.cron_info.is_mutex,null)>-1:t.cron_info.is_mutex},on:{change:function(e){var s=t.cron_info.is_mutex,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.cron_info,"is_mutex",s.concat([null])):i>-1&&t.$set(t.cron_info,"is_mutex",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.cron_info,"is_mutex",o)}}}),t._v("\n            严格互斥执行\n          ")])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"remark"}},[t._v("备注")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cron_info.remark,expression:"cron_info.remark"}],staticClass:"form-control",attrs:{id:"remark"},domProps:{value:t.cron_info.remark},on:{input:function(e){e.target.composing||t.$set(t.cron_info,"remark",e.target.value)}}},[t._v(t._s(t.cron_info.remark))])]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button",id:"do-submit"},on:{click:t.submit}},[t._v("提交")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-heard-part"},[e("ol",{staticClass:"breadcrumb m-b-0"},[e("li",[e("a",{attrs:{href:"/ui/#/"}},[this._v("首页")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("编辑定时任务")])])])}]},y=s("C7Lr")(A.a,w,!1,null,null,null).exports,b=s("xCb2"),x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[t._v("\n    开始时间 "),a("input",{attrs:{type:"text",id:"start-time"},domProps:{value:t.logs.start_time}}),t._v("\n    - 结束时间 "),a("input",{attrs:{type:"text",id:"end-time"},domProps:{value:t.logs.end_time}})]),t._v(" "),a("div",[t._v("\n    定时任务id"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.logs.cron_id,expression:"logs.cron_id"}],attrs:{type:"text"},domProps:{value:t.logs.cron_id},on:{input:function(e){e.target.composing||t.$set(t.logs,"cron_id",e.target.value)}}}),t._v(" 搜索输出"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.logs.output,expression:"logs.output"}],attrs:{type:"text"},domProps:{value:t.logs.output},on:{input:function(e){e.target.composing||t.$set(t.logs,"output",e.target.value)}}})]),t._v(" "),a("div",[t._v("运行时长>="),a("input",{directives:[{name:"model",rawName:"v-model",value:t.logs.use_time,expression:"logs.use_time"}],attrs:{type:"text"},domProps:{value:t.logs.use_time},on:{input:function(e){e.target.composing||t.$set(t.logs,"use_time",e.target.value)}}}),t._v("毫秒 "),a("input",{attrs:{type:"button",value:"搜索"},on:{click:t.search}})]),t._v(" "),a("div",[a("label",{staticStyle:{cursor:"pointer"},on:{click:t.searchFailLogs}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.logs.searchFail,expression:"logs.searchFail"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.logs.searchFail)?t._i(t.logs.searchFail,null)>-1:t.logs.searchFail},on:{change:function(e){var s=t.logs.searchFail,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.logs,"searchFail",s.concat([null])):i>-1&&t.$set(t.logs,"searchFail",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.logs,"searchFail",o)}}}),t._v("查看失败记录\n    ")]),t._v(" "),a("label",{staticStyle:{cursor:"pointer"},on:{click:t.searchResult}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.logs.searchResult,expression:"logs.searchResult"}],attrs:{checked:"",type:"checkbox"},domProps:{checked:Array.isArray(t.logs.searchResult)?t._i(t.logs.searchResult,null)>-1:t.logs.searchResult},on:{change:function(e){var s=t.logs.searchResult,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.logs,"searchResult",s.concat([null])):i>-1&&t.$set(t.logs,"searchResult",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.logs,"searchResult",o)}}}),t._v("只看结果\n    ")]),t._v(" "),a("label",{staticStyle:{cursor:"pointer"},on:{click:t.hideRemarkAndOutput}},[a("input",{attrs:{checked:"",type:"checkbox"}}),t._v("隐藏备注和输出\n    ")]),t._v(" "),a("a",{staticStyle:{cursor:"pointer"},on:{click:t.prevPage}},[t._v("上一页")]),t._v(" "),a("label",[t._v(t._s(t.logs.page)+"/"+t._s(t.logs.totalPage))]),t._v(" "),a("a",{staticStyle:{cursor:"pointer"},on:{click:t.nextPage}},[t._v("下一页")]),t._v("\n    自动刷新 "),a("select",{on:{change:t.refresh}},[a("option",{attrs:{value:"0",selected:""}},[t._v("不刷新")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("1s")]),t._v(" "),a("option",{attrs:{value:"5"}},[t._v("5s")]),t._v(" "),a("option",{attrs:{value:"10"}},[t._v("10s")]),t._v(" "),a("option",{attrs:{value:"30"}},[t._v("30s")]),t._v(" "),a("option",{attrs:{value:"60"}},[t._v("60s")])])]),t._v(" "),a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{cursor:"pointer"},on:{click:t.sortbyid}},[t._v("#Id"),a("img",{staticClass:"sort-tag",attrs:{src:s("ZjV8")}})]),t._v(" "),a("th",[t._v("定时任务Id")]),t._v(" "),a("th",[t._v("进程Id")]),t._v(" "),a("th",{staticStyle:{cursor:"pointer"},on:{click:t.sortbystarttime}},[t._v("开始执行时间"),a("img",{staticClass:"sort-tag",attrs:{src:s("ZjV8")}})]),t._v(" "),a("th",[t._v("结果")]),t._v(" "),a("th",{staticStyle:{cursor:"pointer"},on:{click:t.sortbyusetime}},[t._v("耗时(毫秒)"),a("img",{staticClass:"sort-tag",attrs:{src:s("ZjV8")}})]),t._v(" "),a("th",{staticClass:"ro-text",staticStyle:{display:"none"}},[t._v("备注")]),t._v(" "),a("th",{staticClass:"ro-text",staticStyle:{display:"none"}},[t._v("输出")]),t._v(" "),a("th",[t._v("操作")])])]),t._v(" "),a("tbody",t._l(t.logs.data,function(e){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.id))]),t._v(" "),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.cron_id))]),t._v(" "),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.process_id))]),t._v(" "),a("td",[t._v(t._s(e.start_time))]),t._v(" "),a("td",[t._v(t._s(e.state))]),t._v(" "),a("td",[t._v(t._s(e.use_time))]),t._v(" "),a("td",{staticClass:"ro-text",staticStyle:{"word-break":"break-all",display:"none"}},[t._v(t._s(e.remark))]),t._v(" "),a("td",{staticClass:"ro-text",staticStyle:{"word-break":"break-all",display:"none"}},[t._v(t._s(e.output))]),t._v(" "),a("td",[a("a",{staticClass:"btn",attrs:{"item-process_id":e.process_id,"item-id":e.cron_id},on:{click:t.kill}},[t._v("终止进程")]),t._v(" "),a("a",{staticClass:"btn",attrs:{"item-id":e.id},on:{click:t.detail}},[t._v("详情")])])])}))])])},staticRenderFns:[]};var C=function(t){s("0yAc")},k=s("C7Lr")(b.a,x,!1,C,null,null).exports,P={name:"LogDetail",data:function(){return{log_detail:{id:"",cron_id:"",process_id:"",state:"",start_time:"",use_time:0,remark:"",output:""}}},methods:{getInfo:function(){var t=window.location.hash.split("?",-1);console.log(t);var e=this,s={};if(t.length>1){var a=t[1].split("&"),o=0,i=a.length;for(o=0;o<i;o++){var n=a[o].split("=");n.length>1&&(s[n[0]]=n[1])}console.log(s)}void 0===s.id&&(s.id=0),s.id<=0||axios.get("/cron/log/detail/"+s.id).then(function(t){console.log(t),2e3==t.data.code?(e.log_detail=t.data.data,console.log(e.log)):8e3==t.data.code&&(window.location.href="/ui/login.html")}).catch(function(t){})}},mounted:function(){this.getInfo()}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("span",{staticClass:"tdis"},[t._v("定时任务ID")]),s("span",[t._v(t._s(t.log_detail.cron_id))])]),t._v(" "),s("div",[s("span",{staticClass:"tdis"},[t._v("进程ID")]),s("span",[t._v(t._s(t.log_detail.process_id))])]),t._v(" "),s("div",[s("span",{staticClass:"tdis"},[t._v("状态")]),s("span",[t._v(t._s(t.log_detail.state))])]),t._v(" "),s("div",[s("span",{staticClass:"tdis"},[t._v("开始时间")]),s("span",[t._v(t._s(t.log_detail.start_time))])]),t._v(" "),s("div",[s("span",{staticClass:"tdis"},[t._v("耗时(毫秒)")]),s("span",[t._v(t._s(t.log_detail.use_time))])]),t._v(" "),s("div",[s("span",{staticClass:"tdis"},[t._v("备注")]),s("span",[t._v(t._s(t.log_detail.remark))])]),t._v(" "),s("div",[s("span",{staticClass:"tdis"},[t._v("输出")]),s("span",[t._v(t._s(t.log_detail.output))])])])},staticRenderFns:[]};var E=s("C7Lr")(P,S,!1,function(t){s("/WQn")},null,null).exports,D={name:"UserAdd",data:function(){return{user_name:"",password:"",real_name:"",phone:"",datetime:(new Date).Format("yyyy-MM-dd hh:mm:ss")}},created:function(){},methods:{add:function(){return""==this.user_name?alert("用户名不能为空"):""==this.password?alert("密码不能为空"):""==this.real_name?alert("真实姓名不能为空"):""==this.phone?alert("手机号码不能为空"):void axios.post("/user/register?time="+(new Date).valueOf(),{username:this.user_name,password:this.password,real_name:this.real_name,phone:this.phone}).then(function(t){2e3==t.data.code?(console.log(t),window.location.href="/ui/#/users"):8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){})}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"forms-main"},[s("h2",{staticClass:"inner-tittle"},[t._v("增加用户(*必填项) ")]),t._v(" "),s("div",{staticClass:"graph-form"},[s("div",{staticClass:"form-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"user_name"}},[t._v("*用户名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user_name,expression:"user_name"}],staticClass:"form-control",attrs:{type:"text",id:"user_name"},domProps:{value:t.user_name},on:{input:function(e){e.target.composing||(t.user_name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("*密码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"text",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"real_name"}},[t._v("*真实姓名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.real_name,expression:"real_name"}],staticClass:"form-control",attrs:{type:"text",id:"real_name"},domProps:{value:t.real_name},on:{input:function(e){e.target.composing||(t.real_name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"phone"}},[t._v("*手机")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"form-control",attrs:{type:"text",id:"phone"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.add}},[t._v("提交")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-heard-part"},[e("ol",{staticClass:"breadcrumb m-b-0"},[e("li",[e("a",{attrs:{href:"/ui/#/"}},[this._v("首页")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("增加用户")])])])}]},N=s("C7Lr")(D,L,!1,null,null,null).exports,j=s("OQkK"),F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("h3",{staticClass:"inner-tittle two"},[t._v("用户列表")]),t._v(" "),s("div",{staticClass:"graph"},[s("div",{staticClass:"tables"},[s("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),s("tbody",t._l(t.users.data,function(e){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.user_name))]),t._v(" "),e.enable?s("td",[t._v("启用")]):s("td",[t._v("禁用")]),t._v(" "),s("td",[t._v(t._s(e.real_name))]),t._v(" "),s("td",[t._v(t._s(e.phone))]),t._v(" "),e.admin?s("td",[t._v("是")]):s("td",[t._v("否")]),t._v(" "),s("td",[t._v(t._s(e.created))]),t._v(" "),s("td",[t._v(t._s(e.updated))]),t._v(" "),s("td",[e.enable?s("a",{staticClass:"bth",staticStyle:{cursor:"pointer"},attrs:{"data-id":e.id,"data-enable":"0"},on:{click:t.enable}},[t._v("禁用")]):s("a",{staticClass:"bth",staticStyle:{cursor:"pointer"},attrs:{"data-id":e.id,"data-enable":"1"},on:{click:t.enable}},[t._v("启用")]),t._v(" "),e.admin?s("a",{staticClass:"bth",staticStyle:{cursor:"pointer"},attrs:{"data-id":e.id,"data-admin":"0"},on:{click:t.admin}},[t._v("取消管理员")]):s("a",{staticClass:"bth",staticStyle:{cursor:"pointer"},attrs:{"data-id":e.id,"data-admin":"1"},on:{click:t.admin}},[t._v("设为管理员")]),t._v(" "),s("a",{staticClass:"bth",staticStyle:{cursor:"pointer"},attrs:{"data-id":e.id},on:{click:t.jumpEdit}},[t._v("编辑")]),t._v(" "),s("a",{staticClass:"bth",staticStyle:{cursor:"pointer"},attrs:{"data-id":e.id},on:{click:t.jumpPowers}},[t._v("权限")])])])}))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-heard-part"},[e("ol",{staticClass:"breadcrumb m-b-0"},[e("li",[e("a",{attrs:{href:"/ui/#/"}},[this._v("首页")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("用户管理")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("ID")]),t._v(" "),s("th",[t._v("用户名")]),t._v(" "),s("th",[t._v("状态")]),t._v(" "),s("th",[t._v("真实姓名")]),t._v(" "),s("th",[t._v("手机号码")]),t._v(" "),s("th",[t._v("管理员")]),t._v(" "),s("th",[t._v("添加时间")]),t._v(" "),s("th",[t._v("最后更新")]),t._v(" "),s("th",[t._v("操作")])])])}]},I=s("C7Lr")(j.a,F,!1,null,null,null).exports,R={name:"UserEdit",data:function(){return{userinfo:{id:0,user_name:"",password:"",real_name:"",phone:""}}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var t=window.location.hash.split("?",-1);console.log(t);var e=this,s={};if(t.length>1){var a=t[1].split("&"),o=0,i=a.length;for(o=0;o<i;o++){var n=a[o].split("=");n.length>1&&(s[n[0]]=n[1])}console.log(s)}void 0===s.id&&(s.id=0),s.id<=0||axios.get("/user/info/"+s.id).then(function(t){console.log(t),2e3==t.data.code?e.userinfo=t.data.data:8e3==t.data.code&&(window.location.href="/ui/login.html")}).catch(function(t){})},update:function(){if(""==this.userinfo.user_name)return alert("用户名不能为空");if(""==this.userinfo.password)return alert("密码不能为空");var t=window.location.hash.split("?",-1);console.log(t);var e={};if(t.length>1){var s=t[1].split("&"),a=0,o=s.length;for(a=0;a<o;a++){var i=s[a].split("=");i.length>1&&(e[i[0]]=i[1])}console.log(e)}void 0===e.id&&(e.id=0),e.id<=0||axios.post("/user/update/"+e.id+"?time="+(new Date).valueOf(),{username:this.userinfo.user_name,password:this.userinfo.password,real_name:this.userinfo.real_name,phone:this.userinfo.phone}).then(function(t){console.log(t),2e3==t.data.code?window.location.href="/ui/#/users":8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){})}}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"forms-main"},[s("h2",{staticClass:"inner-tittle"},[t._v("编辑用户(*必填项) ")]),t._v(" "),s("div",{staticClass:"graph-form"},[s("div",{staticClass:"form-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"user_name"}},[t._v("*用户名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.user_name,expression:"userinfo.user_name"}],staticClass:"form-control",attrs:{type:"text",id:"user_name"},domProps:{value:t.userinfo.user_name,value:t.userinfo.user_name},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"user_name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("*密码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.password,expression:"userinfo.password"}],staticClass:"form-control",attrs:{type:"password",id:"password"},domProps:{value:t.userinfo.password,value:t.userinfo.password},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"password",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"real_name"}},[t._v("真实姓名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.real_name,expression:"userinfo.real_name"}],staticClass:"form-control",attrs:{type:"text",id:"real_name"},domProps:{value:t.userinfo.real_name,value:t.userinfo.real_name},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"real_name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"phone"}},[t._v("手机")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.phone,expression:"userinfo.phone"}],staticClass:"form-control",attrs:{type:"text",id:"phone"},domProps:{value:t.userinfo.phone,value:t.userinfo.phone},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"phone",e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.update}},[t._v("提交")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-heard-part"},[e("ol",{staticClass:"breadcrumb m-b-0"},[e("li",[e("a",{attrs:{href:"/ui/#/"}},[this._v("首页")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("编辑用户")])])])}]},T=s("C7Lr")(R,O,!1,null,null,null).exports,U=s("T+NP"),q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("h3",{staticClass:"inner-tittle two"},[t._v("个人信息 "),s("a",{staticClass:"showEdit",staticStyle:{color:"#2e25e6",cursor:"pointer","font-size":"12px","margin-left":"20px","text-decoration":"underline"},on:{click:t.showEdit}},[t._v("编辑个人信息")])]),t._v(" "),s("div",{staticClass:"tables userinfo"},[s("table",{staticClass:"table table-bordered"},[s("tbody",[s("tr",[s("th",{attrs:{scope:"row"}},[t._v("ID")]),t._v(" "),s("td",[t._v(t._s(t.userinfo.id))])]),t._v(" "),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("用户名")]),t._v(" "),s("td",[t._v(t._s(t.userinfo.user_name))])]),t._v(" "),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("真实姓名")]),t._v(" "),s("td",[t._v(t._s(t.userinfo.real_name))])]),t._v(" "),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("手机")]),t._v(" "),s("td",[t._v(t._s(t.userinfo.phone))])])])])]),t._v(" "),s("div",{staticClass:"forms-main",staticStyle:{display:"none"}},[s("h2",{staticClass:"inner-tittle"},[t._v("编辑用户(*必填项) ")]),t._v(" "),s("div",{staticClass:"graph-form"},[s("div",{staticClass:"form-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"user_name"}},[t._v("*用户名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.user_name,expression:"userinfo.user_name"}],staticClass:"form-control",attrs:{type:"text",id:"user_name"},domProps:{value:t.userinfo.user_name,value:t.userinfo.user_name},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"user_name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("*密码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.password,expression:"userinfo.password"}],staticClass:"form-control",attrs:{type:"password",id:"password"},domProps:{value:t.userinfo.password,value:t.userinfo.password},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"password",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"real_name"}},[t._v("真实姓名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.real_name,expression:"userinfo.real_name"}],staticClass:"form-control",attrs:{type:"text",id:"real_name"},domProps:{value:t.userinfo.real_name,value:t.userinfo.real_name},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"real_name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"phone"}},[t._v("手机")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userinfo.phone,expression:"userinfo.phone"}],staticClass:"form-control",attrs:{type:"text",id:"phone"},domProps:{value:t.userinfo.phone,value:t.userinfo.phone},on:{input:function(e){e.target.composing||t.$set(t.userinfo,"phone",e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.update}},[t._v("提交")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-heard-part"},[e("ol",{staticClass:"breadcrumb m-b-0"},[e("li",[e("a",{attrs:{href:"/ui/#/"}},[this._v("首页")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("个人中心")])])])}]},V=s("C7Lr")(U.a,q,!1,null,null,null).exports,Z=s("2jjZ"),M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("h3",{staticClass:"inner-tittle two"},[t._v("<"+t._s(t.userinfo.user_name)+">的权限")]),t._v(" "),t.userinfo.admin?s("div",{staticStyle:{"font-size":"14px","padding-left":"8px","border-left":"#f00 8px solid",color:"#f00"}},[t._v("<"+t._s(t.userinfo.user_name)+">是管理员，具有所有的权限，无需以下设置")]):t._e(),t._v(" "),s("div",{staticClass:"graph"},[s("div",{staticClass:"tables"},[s("div",[s("label",{staticStyle:{"margin-left":"15px"},on:{click:t.checkAll}},[s("input",{staticClass:"selected-all",attrs:{type:"checkbox"}}),t._v("全选")]),s("a",{staticClass:"btn bth",on:{click:t.save}},[t._v("保存")])]),t._v(" "),s("table",{staticClass:"table table-bordered"},[s("tbody",t._l(t.powers,function(e){return s("tr",[s("td",[e.checked?s("input",{staticClass:"power-row",attrs:{"data-id":e.id,checked:"",id:"row-"+e.id,type:"checkbox"}}):s("input",{staticClass:"power-row",attrs:{"data-id":e.id,id:"row-"+e.id,type:"checkbox"}})]),t._v(" "),s("td",[s("label",{attrs:{for:"row-"+e.id}},[t._v("["+t._s(e.id)+"]"+t._s(e.name))])])])}))]),t._v(" "),s("div",[s("label",{staticStyle:{"margin-left":"15px"},on:{click:t.checkAll}},[s("input",{staticClass:"selected-all",attrs:{type:"checkbox"}}),t._v("全选")]),s("a",{staticClass:"btn bth",on:{click:t.save}},[t._v("保存")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-heard-part"},[e("ol",{staticClass:"breadcrumb m-b-0"},[e("li",[e("a",{attrs:{href:"/ui/#/"}},[this._v("首页")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("权限管理")])])])}]},X=s("C7Lr")(Z.a,M,!1,null,null,null).exports,$=s("sxfw"),W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"tables"},[s("table",{staticClass:"table table-bordered",attrs:{id:"cron-list-table",width:"100%"}},[t._m(1),t._v(" "),s("tbody",t._l(t.nodes,function(e){return s("tr",[s("th",{staticClass:"sh-row"},[t._v(t._s(e.Name))]),t._v(" "),s("td",{staticClass:"sh-row"},[t._v(t._s(e.Address))]),t._v(" "),1==e.Status?s("td",{staticClass:"sh-row"},[t._v("正常")]):s("td",{staticClass:"sh-row",staticStyle:{color:"#f00"}},[t._v("故障")]),t._v(" "),e.Leader?s("td",{staticClass:"sh-row"},[t._v("是")]):s("td",{staticClass:"sh-row"},[t._v("否")]),t._v(" "),e.Offline?s("td",{staticClass:"sh-row",staticStyle:{color:"#f00"}},[t._v("已下线")]):s("td",{staticClass:"sh-row"},[t._v("否")]),t._v(" "),s("td",[s("div",[e.Offline?s("a",{staticClass:"btn",attrs:{"item-id":e.ID},on:{click:t.online}},[t._v("上线")]):s("a",{staticClass:"btn",attrs:{"item-id":e.ID},on:{click:t.offline}},[t._v("下线")])])])])}))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-heard-part"},[e("ol",{staticClass:"breadcrumb m-b-0"},[e("li",[e("a",{attrs:{href:"/ui/#/"}},[this._v("首页")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("服务器集群")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"sh-row"},[t._v("服务器")]),t._v(" "),s("th",{staticClass:"sh-row"},[t._v("服务地址")]),t._v(" "),s("th",{staticClass:"sh-row"},[t._v("状态")]),t._v(" "),s("th",{staticClass:"sh-row"},[t._v("Leader")]),t._v(" "),s("th",{staticClass:"sh-row"},[t._v("下线")]),t._v(" "),s("th",[t._v("操作")])])])}]},K=s("C7Lr")($.a,W,!1,null,null,null).exports;a.a.use(n.a);var Q=new n.a({routes:[{path:"/",name:"Index",component:u},{path:"/add",name:"Add",component:m},{path:"/cron_list",name:"CronList",component:g},{path:"/edit",name:"Edit",component:y},{path:"/logs",name:"Logs",component:k},{path:"/log_detail",name:"LogDetail",component:E},{path:"/user_add",name:"UserAdd",component:N},{path:"/users",name:"Users",component:I},{path:"/user_edit",name:"UserEdit",component:T},{path:"/user_center",name:"UserCenter",component:V},{path:"/user_powers",name:"UserPowers",component:X},{path:"/nodes",name:"Nodes",component:K}]});a.a.config.productionTip=!1,new a.a({el:"#outter-wp",router:Q,components:{App:i},template:"<App/>"})},OQkK:function(t,e,s){"use strict";(function(t){e.a={name:"Users",data:function(){return{users:{data:[]}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;axios.get("/users?time="+(new Date).valueOf()).then(function(e){2e3==e.data.code?(t.users.data=e.data.data,console.log(e)):8e3==e.data.code?window.location.href="/ui/login.html":alert(e.data.message)}).catch(function(t){})},jumpEdit:function(e){var s=t(e.target).attr("data-id");window.location.href="/ui/#/user_edit?id="+s},jumpPowers:function(){var e=t(event.target).attr("data-id");window.location.href="/ui/#/user_powers?id="+e},admin:function(){var e=this,s=t(event.target).attr("data-id"),a=t(event.target).attr("data-admin");axios.post("/user/admin/"+s+"/"+a+"?time="+(new Date).valueOf()).then(function(t){if(console.log(t),2e3==t.data.code){for(var o=e.users.data.length,i=0;i<o;i++)if(e.users.data[i].id==s){e.users.data[i].admin="1"==a;break}}else 8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){alert(t)})},enable:function(e){var s=this,a=t(e.target).attr("data-id"),o=t(e.target).attr("data-enable");axios.post("/user/enable/"+a+"/"+o+"?time="+(new Date).valueOf()).then(function(t){if(console.log(t),2e3==t.data.code){for(var e=s.users.data.length,i=0;i<e;i++)if(s.users.data[i].id==a){s.users.data[i].enable="1"==o;break}}else 8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){alert(t)})}}}}).call(e,s("L7Pj"))},"T+NP":function(t,e,s){"use strict";(function(t){e.a={name:"UserCenter",data:function(){return{userinfo:{id:0,user_name:"",password:"",real_name:"",phone:""}}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var t=this;axios.get("/user/session/info").then(function(e){console.log(e),2e3==e.data.code?t.userinfo=e.data.data:8e3==e.data.code&&(window.location.href="/ui/login.html")}).catch(function(t){})},showEdit:function(){t(".forms-main").toggle(),t(".userinfo").toggle(),"编辑个人信息"==t(".showEdit").html()?t(".showEdit").html("收起"):t(".showEdit").html("编辑个人信息")},update:function(){var t=this;return""==t.userinfo.user_name?alert("用户名不能为空"):""==t.userinfo.password?alert("密码不能为空"):void axios.post("/user/session/update?time="+(new Date).valueOf(),{username:t.userinfo.user_name,password:t.userinfo.password,real_name:t.userinfo.real_name,phone:t.userinfo.phone}).then(function(e){console.log(e),2e3==e.data.code?t.showEdit():8e3==e.data.code?window.location.href="/ui/login.html":alert(e.data.message)}).catch(function(t){})}}}}).call(e,s("L7Pj"))},ZjV8:function(t,e){t.exports="data:image/jpeg;base64,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"},aj38:function(t,e,s){"use strict";(function(t){var a=s("3cXf"),o=s.n(a);e.a={name:"Index",data:function(){return{cron_list:[],is_stop:0,is_mutex:0,is_timeout:0,keyword:"",days:7,cron_count:0,history_run_count:0,day_run_count:0,day_run_fail_count:0,option:{title:{text:"平均运行时长"},tooltip:{trigger:"axis"},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["2018-10-01"]},yAxis:{type:"value"},series:[{name:"ls /home",type:"line",stack:"总量",data:[120]}]}}},methods:{getStatistics:function(){var t=this;axios.get("/index?time="+(new Date).valueOf()).then(function(e){2e3==e.data.code?(t.cron_count=e.data.data.cron_count,t.history_run_count=e.data.data.history_run_count,t.day_run_count=e.data.data.day_run_count,t.day_run_fail_count=e.data.data.day_run_fail_count,t.history_run_count>=1e4&&(t.history_run_count=Math.floor(t.history_run_count/1e4*100)/100+"<a style='font-size: 12px; font-weight: bold; color: #000;'>万</a>"),t.day_run_count>=1e4&&(t.day_run_count=Math.floor(t.day_run_count/1e4*100)/100+"<a style='font-size: 12px; font-weight: bold; color: #000;'>万</a>"),t.day_run_fail_count>=1e4&&(t.day_run_fail_count=Math.floor(t.day_run_fail_count/1e4*100)/100+"<a style='font-size: 12px; font-weight: bold; color: #000;'>万</a>")):8e3==e.data.code?window.location.href="/ui/login.html":console.log(e.data.message)}).catch(function(t){})},getCharts:function(t){axios.get("/charts/"+this.days+"?time="+(new Date).valueOf()).then(function(e){2e3==e.data.code?(t.dataProvider=e.data.data,t.validateNow(),t.validateData()):8e3==e.data.code?window.location.href="/ui/login.html":console.log(e.data.message)}).catch(function(t){})},checkedAll:function(e){t("input.cron-item").prop("checked",t(e.target).prop("checked")),t(".cron-tool").prop("checked",t(e.target).prop("checked"))},list:function(){var t=this,e="/cron/list?";0==t.is_stop?e+="stop=&":1==t.is_stop?e+="stop=1&":2==t.is_stop&&(e+="stop=0&"),0==t.is_mutex?e+="mutex=&":1==t.is_mutex?e+="mutex=1&":2==t.is_mutex&&(e+="mutex=0&"),0==t.is_timeout?e+="timeout=&":1==t.is_timeout?e+="timeout=1&":2==t.is_timeout&&(e+="timeout=0&"),e+="keyword="+encodeURIComponent(t.keyword)+"&time="+(new Date).valueOf(),axios.get(e).then(function(e){2e3==e.data.code?(console.log(e.data.data),t.cron_list=e.data.data):8e3==e.data.code?window.location.href="/ui/login.html":console.log(e.data.message)}).catch(function(t){})},getAvgRunTime:function(e){var s=this,a=[];t(".cron-item").each(function(e,s){t(this).prop("checked")&&a.push(parseInt(t(this).attr("data-id")))}),console.log(a),axios.get("/charts/avg_run_time/"+s.days+"?time="+(new Date).valueOf()+"&ids="+o()(a)).then(function(t){console.log(t),2e3==t.data.code?(s.option.xAxis.data=t.data.data.xAxis,s.option.series=t.data.data.series,e.setOption(s.option,!0)):8e3==t.data.code?window.location.href="/ui/login.html":console.log(t.data.message)}).catch(function(t){})}},mounted:function(){var t=this;t.list();var e=AmCharts.makeChart("chartdiv",{type:"serial",theme:"light",dataDateFormat:"YYYY-MM-DD",legend:{useGraphSettings:!0},dataProvider:[],synchronizeGrid:!0,valueAxes:[{id:"v1",axisColor:"#FF6600",axisThickness:2,axisAlpha:1,position:"left"},{id:"v3",axisColor:"#B0DE09",axisThickness:2,gridAlpha:0,offset:50,axisAlpha:1,position:"left"}],graphs:[{valueAxis:"v1",lineColor:"#FF6600",bullet:"round",bulletBorderThickness:1,hideBulletsCount:30,title:"失败次数",valueField:"fail",fillAlphas:0,balloonText:"[[day]]<br><b><span style='font-size:14px;'>失败次数:[[fail]]</span></b>"},{valueAxis:"v3",lineColor:"#B0DE09",bullet:"triangleUp",bulletBorderThickness:1,hideBulletsCount:30,title:"执行次数",valueField:"success",fillAlphas:0,balloonText:"[[day]]<br><b><span style='font-size:14px;'>执行次数:[[success]]</span></b>"}],chartScrollbar:{},chartCursor:{cursorPosition:"mouse"},categoryField:"day",categoryAxis:{parseDates:!1,axisColor:"#DADADA",minorGridEnabled:!0},export:{enabled:!0,position:"bottom-right"}});function s(){e.zoomToIndexes(0,e.dataProvider.length-1)}e.addListener("dataUpdated",s),s(),t.getCharts(e),t.getStatistics();var a=echarts.init(document.getElementById("avg_chart"));a.setOption(t.option,!0),t.getAvgRunTime(a),window.setInterval(function(){t.getStatistics(),t.getCharts(e),t.getAvgRunTime(a)},2e3)},created:function(){var t=document.createElement("script");t.src="./static/js/moment-2.2.1.js",document.body.appendChild(t),(t=document.createElement("script")).src="./static/js/protovis-d3.2.js",document.body.appendChild(t),(t=document.createElement("script")).src="./static/js/Chart.js",document.body.appendChild(t),(t=document.createElement("script")).src="./static/js/vix.js",document.body.appendChild(t),(t=document.createElement("script")).src="./static/js/index.vue.js",document.body.appendChild(t);var e=document.createElement("link");e.rel="stylesheet",e.src="./static/css/vroom.css",document.body.appendChild(e)}}}).call(e,s("L7Pj"))},sxfw:function(t,e,s){"use strict";(function(t){e.a={name:"Nodes",data:function(){return{nodes:[],datetime:(new Date).Format("yyyy-MM-dd hh:mm:ss")}},created:function(){this.getList();var t=this;window.setInterval(function(){t.getList()},3e3)},methods:{getList:function(){var t=this;axios.get("/services?time="+(new Date).valueOf()).then(function(e){2e3==e.data.code?(t.nodes=e.data.data,console.log(e)):8e3==e.data.code?window.location.href="/ui/login.html":alert(e.data.message)}).catch(function(t){})},online:function(){var e=t(event.target).attr("item-id"),s=this;axios.post("/services/online/"+e+"?time="+(new Date).valueOf()).then(function(t){if(console.log(t),2e3==t.data.code)for(var a=0;a<s.nodes.length;a++)s.nodes[a].ID==e&&(s.nodes[a].Offline=0);else 8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){alert(t)})},offline:function(){var e=t(event.target).attr("item-id"),s=this;axios.post("/services/offline/"+e+"?time="+(new Date).valueOf()).then(function(t){if(console.log(t),2e3==t.data.code)for(var a=0;a<s.nodes.length;a++)s.nodes[a].ID==e&&(s.nodes[a].Offline=1);else 8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){alert(t)})},del:function(){}}}}).call(e,s("L7Pj"))},tGEK:function(t,e){},"vPr/":function(t,e,s){"use strict";(function(t){e.a={name:"Edit",data:function(){return{cron_info:{cron_set:""},users:{data:[]}}},mounted:function(){var t=this;jeDate("#start-time",{festival:!0,minDate:"1900-01-01",maxDate:"2099-12-31",method:{choose:function(t){}},format:"YYYY-MM-DD hh:mm:ss",toggle:function(t){},donefun:function(e){console.log(e),t.cron_info.start_time=e.val}}),jeDate("#end-time",{festival:!0,minDate:"1900-01-01",maxDate:"2099-12-31",method:{choose:function(t){}},format:"YYYY-MM-DD hh:mm:ss",toggle:function(t){},donefun:function(e){console.log(e),t.cron_info.end_time=e.val}}),this.getInfo(),this.getUsers()},methods:{getUsers:function(){var t=this;axios.get("/users?time="+(new Date).valueOf()).then(function(e){2e3==e.data.code?(t.users.data=e.data.data,console.log(e)):8e3==e.data.code?window.location.href="/ui/login.html":alert(e.data.message)}).catch(function(t){})},getInfo:function(){var t=window.location.hash.split("?",-1);console.log(t);var e=this,s={};if(t.length>1){var a=t[1].split("&"),o=0,i=a.length;for(o=0;o<i;o++){var n=a[o].split("=");n.length>1&&(s[n[0]]=n[1])}console.log(s)}void 0!==s.id&&axios.get("/cron/info/"+s.id+"?time="+(new Date).valueOf()).then(function(t){2e3==t.data.code?(console.log(t),e.cron_info=t.data.data):8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){})},submit:function(){var e={cron_set:this.cron_info.cron_set,command:this.cron_info.command,start_time:t("#start-time").val(),end_time:t("#end-time").val(),remark:this.cron_info.remark,stop:this.cron_info.stop?1:0,is_mutex:this.cron_info.is_mutex?1:0,blame:this.cron_info.blame};console.log(this.cron_info,e);var s=window.location.hash.split("?",-1);console.log(s);var a={};if(s.length>1){var o=s[1].split("&"),i=0,n=o.length;for(i=0;i<n;i++){var r=o[i].split("=");r.length>1&&(a[r[0]]=r[1])}console.log(a)}axios.post("/cron/update/"+a.id+"?time="+(new Date).valueOf(),e).then(function(t){console.log(t),2e3==t.data.code?window.location.href="/ui/#/cron_list":8e3==t.data.code?window.location.href="/ui/login.html":alert(t.data.message)}).catch(function(t){alert(t)})}},created:function(){}}}).call(e,s("L7Pj"))},xCb2:function(t,e,s){"use strict";(function(t){var s=null;e.a={name:"CronList",data:function(){return{logs:{data:[],limit:50,page:1,total:0,totalPage:0,searchFail:!1,searchResult:!0,sort_by:"id",sort_type:"desc",start_time:"",end_time:"",cron_id:"",output:"",use_time:0}}},mounted:function(){window.location.href;var t=this,e=window.location.hash.split("?",-1),s={};if(e.length>1){var a=e[1].split("&"),o=0,i=a.length;for(o=0;o<i;o++){var n=a[o].split("=");n.length>1&&(s[n[0]]=n[1])}console.log(s)}void 0===s.id&&(s.id=0),s.id>0&&(t.logs.cron_id=s.id),t.getLogs("mounted"),jeDate("#start-time",{festival:!0,minDate:"1900-01-01",maxDate:"2099-12-31",method:{choose:function(t){}},format:"YYYY-MM-DD hh:mm:ss",toggle:function(t){},donefun:function(e){console.log(e),t.logs.start_time=e.val}}),jeDate("#end-time",{festival:!0,minDate:"1900-01-01",maxDate:"2099-12-31",method:{choose:function(t){}},format:"YYYY-MM-DD hh:mm:ss",toggle:function(t){},donefun:function(e){console.log(e),t.logs.end_time=e.val}})},methods:{searchFailLogs:function(){this.logs.page=1;var t=this;console.log(this.logs.searchFail),window.setTimeout(function(){console.log(t.logs.searchFail),t.getLogs("setTimeout")},20)},searchResult:function(){this.logs.page=1;var t=this;console.log(this.logs.searchResult),window.setTimeout(function(){console.log(t.logs.searchResult),t.getLogs("setTimeout")},20)},sortbyid:function(t){this.logs.page=1,this.logs.sort_by="id","asc"==this.logs.sort_type?this.logs.sort_type="desc":this.logs.sort_type="asc",this.getLogs("sort")},sortbyusetime:function(t){this.logs.page=1,this.logs.sort_by="use_time","asc"==this.logs.sort_type?this.logs.sort_type="desc":this.logs.sort_type="asc",this.getLogs("sort")},sortbystarttime:function(){this.logs.page=1,this.logs.sort_by="start_time","asc"==this.logs.sort_type?this.logs.sort_type="desc":this.logs.sort_type="asc",this.getLogs("sort")},getLogs:function(t){console.log(t);var e=this,s="0";e.logs.searchFail&&(s="1");var a=1;console.log(e.logs.searchResult),e.logs.searchResult||(a=0),console.log(e.logs.cron_id);var o=e.logs.cron_id;""==o&&(o=0),axios.get("/log/list/"+o+"/"+s+"/"+e.logs.page+"/"+e.logs.limit+"?time="+(new Date).valueOf()+"&search_result="+a+"&sort_by="+e.logs.sort_by+"&sort_type="+e.logs.sort_type+"&start_time="+encodeURIComponent(e.logs.start_time)+"&end_time="+encodeURIComponent(e.logs.end_time)+"&output="+encodeURIComponent(e.logs.output)+"&use_time="+e.logs.use_time).then(function(t){2e3==t.data.code?(console.log(t),e.logs.data=t.data.data.data,e.logs.limit=t.data.data.limit,e.logs.page=t.data.data.page,e.logs.total=t.data.data.total,e.logs.totalPage=t.data.data.totalPage):8e3==t.data.code?window.location.href="/ui/login.html":console.log(t.data.message)}).catch(function(t){})},search:function(){this.getLogs("search")},prevPage:function(){var t=this.logs.page-1;t<1&&(t=this.logs.totalPage),this.logs.page=t,this.getLogs("prevPage")},nextPage:function(){var t=this.logs.page+1;t>this.logs.totalPage&&(t=1),this.logs.page=t,this.getLogs("nextPage")},refresh:function(e){var a=this,o=t(e.target).val();console.log(o),null!=s&&window.clearInterval(s),o>0&&(s=window.setInterval(function(){a.getLogs("refresh setInterval")},1e3*o))},kill:function(e){var s=t(e.target).attr("item-id"),a=t(e.target).attr("item-process_id");axios.get("/cron/kill/"+s+"/"+a+"?time="+(new Date).valueOf()).then(function(s){console.log(s),2e3==s.data.code?t(e.target).html("kill成功"):8e3==s.data.code?window.location.href="/ui/login.html":t(e.target).html("kill失败"),window.setTimeout(function(){t(e.target).html("终止进程")},3e3)}).catch(function(t){})},detail:function(e){var s=t(e.target).attr("item-id");window.location.href="/ui/#/log_detail?id="+s},hideRemarkAndOutput:function(e){t(e.target).prop("checked")?t(".ro-text").hide():t(".ro-text").show()}}}}).call(e,s("L7Pj"))}},["NHnr"]);
//# sourceMappingURL=app.b6c41244b3a852dbf09f.js.map